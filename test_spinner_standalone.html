<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Spinner</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <div class="container mt-5">
        <h2>Test del Spinner de Inventario</h2>

        <!-- Botón para probar el spinner -->
        <button id="btnTest" class="btn btn-primary mb-3">Probar Carga de Artículos</button>

        <!-- Tabla de prueba -->
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Descripción</th>
                        <th>Stock</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody id="tabla-inventario-body">
                    <!-- Contenido inicial -->
                    <tr>
                        <td colspan="4" class="text-center">Haz clic en "Probar Carga" para iniciar</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Función para mostrar spinner
        function mostrarCargando() {
            const tbody = document.getElementById('tabla-inventario-body');
            if (tbody) {
                tbody.innerHTML = `
                    <tr id="loading-row">
                        <td colspan="4" class="text-center py-4">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Cargando...</span>
                            </div>
                            <p class="mt-2 text-muted">Cargando artículos...</p>
                        </td>
                    </tr>
                `;
            }
        }

        // Función para simular carga de datos
        async function cargarArticulosTest() {
            const tbody = document.getElementById('tabla-inventario-body');

            // Mostrar spinner
            mostrarCargando();

            try {
                // Simular tiempo de carga
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Simular datos cargados exitosamente
                tbody.innerHTML = `
                    <tr>
                        <td>ART001</td>
                        <td>Filtro de aceite</td>
                        <td>15</td>
                        <td><span class="badge bg-success">Activo</span></td>
                    </tr>
                    <tr>
                        <td>ART002</td>
                        <td>Pastillas de freno</td>
                        <td>8</td>
                        <td><span class="badge bg-warning">Bajo Stock</span></td>
                    </tr>
                    <tr>
                        <td>ART003</td>
                        <td>Aceite motor 5W30</td>
                        <td>25</td>
                        <td><span class="badge bg-success">Activo</span></td>
                    </tr>
                `;

                console.log('✅ Datos cargados exitosamente');

            } catch (error) {
                console.error('❌ Error al cargar:', error);

                // Mostrar error
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" class="text-center py-4">
                            <div class="alert alert-danger mb-0">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                Error al cargar artículos
                            </div>
                            <button class="btn btn-primary mt-2" onclick="cargarArticulosTest()">
                                <i class="fas fa-redo me-1"></i>Reintentar
                            </button>
                        </td>
                    </tr>
                `;
            }
        }

        // Evento del botón
        document.getElementById('btnTest').addEventListener('click', cargarArticulosTest);
    </script>
</body>

</html>